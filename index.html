<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>코로나19감염확률계산기</title>
    <style>
        #main{
            max-width: 720px;
        }
        span.val{background-color: lightgray;
        border-radius: 10%;}
        footer{
            font-size: 0.8em;
            color: gray;
            margin-top: 1em;
            max-width: 720px;
        }
    </style>
    <script>
        var man = 50;
        var result = 0;
        var b72 = 0;
        var b71 = 0;
        var exh = 30;                                       
        var b58 = 70;
        var b70 = 0;
        var e17 = 100;
        var e24 = 1;
        var rat = 3;
        var rep = 16;
        var b104=0;
        var b75 = 0;

        function calc() {
            var res = document.getElementById("res");
            b70=25*(1-exh/100)*2;
            b71 = b70/3.92/e17*3*(1-(1/3.92/e24)*(1-Math.exp(e24*(-1)*3.92)));
            b72 = b71*0.52*e24*(1-b58/100);
            b75 = 1 - Math.exp(-b72);
            b104 = 1 - Math.pow(1 - b75*rat/100,man-1)
            result = 1-Math.pow(1-b104, rep);
            res.innerHTML = Math.round(result *10000)/100;
        }


        function che24() {
            var inp = document.getElementById("e24i");
            var out = document.getElementById("e24s");
            out.innerHTML = inp.value;
            e24 = inp.value;
            calc();
        }
        function chrep() {
            var inp = document.getElementById("repi");
            var out = document.getElementById("reps");
            out.innerHTML = inp.value;
            rep = inp.value;
            calc();
        }
        function che17() {
            var inp = document.getElementById("e17i");
            e17 = inp.value;
            calc();
        }
        function chman() {
            var inp = document.getElementById("mani");
            var out = document.getElementById("mans");
            out.innerHTML = inp.value;
            man = inp.value;
            calc();
        }
        function chb58() {
            var inp = document.getElementById("b58i");
            var out = document.getElementById("b58s");
            out.innerHTML = inp.value;
            b58 = inp.value;
            calc();
        }
        function chexh() {
            var inp = document.getElementById("exhi");
            var out = document.getElementById("exhs");
            out.innerHTML = inp.value;
            exh = inp.value;
            calc();
        }
        function chrat() {
            var inp = document.getElementById("rati");
            var out = document.getElementById("rats");
            out.innerHTML = inp.value;
            rat = inp.value;
            calc();
        }
    </script>
</head>
<body>
    <header>
        <h1>코로나 19 감염 확률 계산기</h1>
        <hr>
    </header>
    <section>
        <div id="main">
            제 수업은 <input type="range" oninput="che24()" class="sli" min="1.0" max="5.0" step="0.5" value="1" id="e24i" style="width: 5em;"> <span class="val" id="e24s">1</span>시간입니다.

            이번 학기 동안 <input type="range" oninput="chrep()" class="sli" min="1" max="20" step="1" value="16" id="repi" style="width: 8em;"> <span class="val" id="reps">16</span>회 수업을 듣습니다.

            강의실 면적은 <input type="number" onchange="che17()" id="e17i" style="width: 3em;" value="100">m²이며 <input type="range" oninput="chman()" min="1" max="100" step="1" id="mani" style="width: 10em;"> <span class="val" value="50" id="mans">50</span>명의 학생이 이 수업을 듣습니다.

            저는 <input type="range" oninput="chb58()" class="sli" min="1" max="100" step="1" value="70" id="b58i" style="width: 10em;"> <span class="val"id="b58s" >70</span>%의 효율을 가진 마스크를 착용하고 있으며
            
            다른 사람들은 <input type="range" oninput="chexh()" class="sli" min="1" max="100" step="1" id="exhi" value="30" style="width: 10em;"> <span class="val"id="exhs" >30</span>%의 효율을 가진 마스크를 착용하고 있습니다.
            
            현재 우리나라의 코로나 19 확진율은 <input type="range" oninput="chrat()" class="sli" min="0" max="7" step="0.05" id="rati" value="3" style="width: 5em;"> <span class="val"id="rats" >3</span>%입니다.
        </div>
        <span>
            저의 코로나 19 감염 확률은  <span class="val" id="res">51.61</span> %입니다.
        </span>
    </section>
    <footer>
        이 웹사이트는 <a href="https://docs.google.com/spreadsheets/d/16K1OQkLD4BjgBdO8ePj6ytf-RpPMlJ6aXFg3PrIQBbQ/edit#gid=1425126572">COVID-19_Aerosol_Transmission_Estimator</a>에 기반하여 제작되었습니다. 계산 결과는 절대적이지 않으며 천장높이 3m의 일반적인 대학 강의실을 가정하여 계산하였습니다.        
    </footer>
</body>
</html>